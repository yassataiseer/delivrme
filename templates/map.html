<!DOCTYPE html>
<html>
<head>
    <h1>{{data1}}</h1>
    <script type="text/javascript">     
    var hello = [];
    </script>
    {% for data in data1%}

    <script type="text/javascript">

    console.log('{{data[2]}}')
    hello.push('{{data}}')
    console.log("HELLO");
    console.log(hello);
    </script>
    {%endfor%}
    


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
        integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
        
    <script async defer src="https://maps.googleapis.com/maps/api/js?key={{api_key}}&callback=initMap"
    type="text/javascript"></script>
    {% for data in data1%}

    <script type="text/javascript">
    for (const creds of hello){
        var credentailsstuff= creds.split(",")
        console.log(credentailsstuff)
    
    function initMap() {
        var latitude = parseFloat(credentailsstuff[2]);
        var longitude = parseFloat(credentailsstuff[3]);
        console.log(longitude);
        const map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: {{data[2]}}, lng: {{data[3]}} },
            zoom: 16
          });
          var marker,i;
          
          new google.maps.Marker({
            
            position: {lat: latitude, lng: longitude },
            map,
            title: "Hello World!",});
    }}
    </script>
</head>
<body>
<div class="container">
    <div id="map" style="width:100%; height:500px;"></div>
</div>
</body>
{%endfor%}

</html>