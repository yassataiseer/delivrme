<!DOCTYPE html>
<html>
<head>
    <h1>{{data1}}</h1>
    <script type="text/javascript">     
    var hello = [];
    </script>
    {% for data in data1%}

    <script type="text/javascript">

    hello.push('{{data}}')
    </script>
    {%endfor%}
    


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
        integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
        
    <script async defer src="https://maps.googleapis.com/maps/api/js?key={{api_key}}&callback=initMap"
    type="text/javascript"></script>
    {% for data in data1%}

    <script type="text/javascript">

    
    function initMap() {

        const map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: {{data[2]}}, lng: {{data[3]}} },
            zoom: 16
          });
          var marker,i;
          for (const creds of hello){
        var credentailsstuff= creds.split(",")
        console.log("LINE");
        console.log(credentailsstuff[2])
        var latitude = parseInt(credentailsstuff[2]);
        var longitude = parseInt(credentailsstuff[3]);
        var address = credentailsstuff[1];
        console.log(latitude);
        console.log(longitude);
        const infowindow = new google.maps.InfoWindow({
        content: address,
  });
        const marker =  new google.maps.Marker({
            
            position: {lat: latitude, lng: longitude },
            map,
            title: "Hello World!",});
    marker.addListener("click", () => {
    infowindow.open(map, marker);
  });
    }}
    </script>
</head>
<body>
<div class="container">
    <div id="map" style="width:100%; height:500px;"></div>
</div>
</body>
{%endfor%}

</html>